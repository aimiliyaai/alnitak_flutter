# Alnitak Flutter

ä¸€ä¸ªç±»ä¼¼å“”å“©å“”å“©å›½é™…ç‰ˆçš„ Flutter ç§»åŠ¨åº”ç”¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°
- ğŸ  åŒåˆ—å¸ƒå±€é¦–é¡µï¼ˆå‚è€ƒå“”å“©å“”å“©å›½é™…ç‰ˆï¼‰
- ğŸ“± åº•éƒ¨å¯¼èˆªæ ï¼ˆé¦–é¡µã€æˆ‘çš„ï¼‰
- ğŸ¬ çƒ­é—¨è§†é¢‘åˆ—è¡¨å±•ç¤º
- ğŸ“„ åˆ†é¡µåŠ è½½ï¼ˆæ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šï¼‰
- ğŸ–¼ï¸ è§†é¢‘å¡ç‰‡å±•ç¤ºï¼ˆå°é¢ã€æ ‡é¢˜ã€ä½œè€…ã€æ’­æ”¾æ•°ã€æ—¶é•¿ç­‰ï¼‰
- ğŸŒ API å¯¹æ¥ï¼ˆçƒ­é—¨è§†é¢‘æ¥å£ï¼‰
- ğŸ¥ **è§†é¢‘æ’­æ”¾é¡µé¢**
  - è§†é¢‘æ’­æ”¾å™¨ï¼ˆåŸºäº video_playerï¼‰
  - ä½œè€…ä¿¡æ¯å¡ç‰‡ï¼ˆå¤´åƒã€åå­—ã€ç²‰ä¸æ•°ã€å…³æ³¨æŒ‰é’®ï¼‰
  - è§†é¢‘ä¿¡æ¯å±•ç¤ºï¼ˆæ ‡é¢˜ã€æ’­æ”¾é‡ã€å¼¹å¹•æ•°ã€ä¸Šä¼ æ—¶é—´ã€åœ¨çº¿äººæ•°ï¼‰
  - ä¸‰å¤§æ“ä½œæŒ‰é’®ï¼ˆç‚¹èµã€æ”¶è—ã€åˆ†äº«ï¼‰
  - åˆ†é›†åˆ—è¡¨æ”¯æŒï¼ˆåˆ—è¡¨/ç½‘æ ¼è§†å›¾åˆ‡æ¢ã€è‡ªåŠ¨è¿æ’­ï¼‰
  - è§†é¢‘æ¨èåŒºåŸŸï¼ˆç›¸å…³æ¨èã€è‡ªåŠ¨è¿æ’­ï¼‰
  - æ’­æ”¾è¿›åº¦è®°å¿†ä¸ä¸ŠæŠ¥
  - å“åº”å¼å¸ƒå±€ï¼ˆå®½å±å·¦å³ä¸¤æ ï¼Œçª„å±å•æ ï¼‰

### ğŸš§ å¼€å‘ä¸­
- è¯„è®ºåŠŸèƒ½
- å¼¹å¹•åŠŸèƒ½
- ç”¨æˆ·ç™»å½•/æ³¨å†Œ
- æœç´¢åŠŸèƒ½

## é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart                 # åº”ç”¨å…¥å£
â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ api_response.dart     # APIå“åº”æ¨¡å‹
â”‚   â”œâ”€â”€ video_api_model.dart  # è§†é¢‘APIæ¨¡å‹
â”‚   â”œâ”€â”€ video_item.dart       # è§†é¢‘åˆ—è¡¨é¡¹æ¨¡å‹
â”‚   â””â”€â”€ video_detail.dart     # è§†é¢‘è¯¦æƒ…æ¨¡å‹
â”œâ”€â”€ pages/                    # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ home_page.dart        # é¦–é¡µ
â”‚   â”œâ”€â”€ main_page.dart        # ä¸»é¡µé¢ï¼ˆåº•éƒ¨å¯¼èˆªï¼‰
â”‚   â”œâ”€â”€ profile_page.dart     # æˆ‘çš„é¡µé¢
â”‚   â””â”€â”€ video/                # è§†é¢‘ç›¸å…³é¡µé¢
â”‚       â”œâ”€â”€ video_play_page.dart  # è§†é¢‘æ’­æ”¾é¡µé¢
â”‚       â””â”€â”€ widgets/          # æ’­æ”¾é¡µé¢ç»„ä»¶
â”‚           â”œâ”€â”€ video_player_widget.dart   # æ’­æ”¾å™¨ç»„ä»¶
â”‚           â”œâ”€â”€ author_card.dart           # ä½œè€…ä¿¡æ¯å¡ç‰‡
â”‚           â”œâ”€â”€ video_info_card.dart       # è§†é¢‘ä¿¡æ¯å¡ç‰‡
â”‚           â”œâ”€â”€ video_action_buttons.dart  # æ“ä½œæŒ‰é’®ç»„ä»¶
â”‚           â”œâ”€â”€ part_list.dart             # åˆ†é›†åˆ—è¡¨
â”‚           â””â”€â”€ recommend_list.dart        # æ¨èåˆ—è¡¨
â”œâ”€â”€ services/                 # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ video_api_service.dart # çƒ­é—¨è§†é¢‘API
â”‚   â””â”€â”€ video_service.dart     # è§†é¢‘è¯¦æƒ…/æ’­æ”¾API
â”œâ”€â”€ utils/                    # å·¥å…·ç±»
â”‚   â””â”€â”€ http_client.dart      # HTTPå®¢æˆ·ç«¯
â””â”€â”€ widgets/                  # å…¬å…±UIç»„ä»¶
    â””â”€â”€ video_card.dart       # è§†é¢‘å¡ç‰‡
```

## æŠ€æœ¯æ ˆ

- **Flutter**: ^3.9.2
- **ä¾èµ–åŒ…**:
  - `http`: ^1.2.0 (ç½‘ç»œè¯·æ±‚)
  - `dio`: ^5.4.0 (é«˜çº§HTTPå®¢æˆ·ç«¯)
  - `video_player`: ^2.8.0 (è§†é¢‘æ’­æ”¾)
  - `shared_preferences`: ^2.2.0 (æœ¬åœ°å­˜å‚¨)
  - `share_plus`: ^7.2.0 (åˆ†äº«åŠŸèƒ½)
  - `intl`: ^0.18.1 (å›½é™…åŒ–å’Œæ—¥æœŸæ ¼å¼åŒ–)
- **åç«¯API**: `http://anime.ayypd.cn:3000`

## API æ¥å£

### çƒ­é—¨è§†é¢‘
```
GET /api/v1/video/getHotVideo?page=é¡µç &pageSize=å†…å®¹æ•°é‡
```

**åˆ†é¡µå‚æ•°**:
- `page`: é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
- `pageSize`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼Œæœ€å¤§30ï¼‰

### è§†é¢‘æ’­æ”¾ç›¸å…³

#### è·å–è§†é¢‘è¯¦æƒ…
```
GET /api/v1/video/getVideoById?vid={è§†é¢‘ID}
```

#### è·å–è§†é¢‘ç»Ÿè®¡
```
GET /api/v1/archive/video/stat?vid={è§†é¢‘ID}
```

#### ç‚¹èµ/å–æ¶ˆç‚¹èµ
```
POST /api/v1/like/video/{è§†é¢‘ID}
DELETE /api/v1/like/video/{è§†é¢‘ID}
```

#### æ”¶è—è§†é¢‘
```
POST /api/v1/collect/video
Body: { vid, add_list: [], cancel_list: [] }
```

#### å…³æ³¨/å–æ¶ˆå…³æ³¨
```
POST /api/v1/relation/follow/{ç”¨æˆ·ID}
DELETE /api/v1/relation/follow/{ç”¨æˆ·ID}
```

#### æ’­æ”¾è¿›åº¦
```
GET /api/v1/history/video/getProgress?vid={è§†é¢‘ID}&part={åˆ†é›†å·}
POST /api/v1/history/video/addHistory
Body: { vid, part, time }
```

#### æ¨èè§†é¢‘
```
GET /api/v1/video/getRelatedVideoList?vid={è§†é¢‘ID}
```

## å¼€å§‹ä½¿ç”¨

### ç¯å¢ƒè¦æ±‚
- Flutter SDK 3.9.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- Dart SDK
- Android Studio / Xcode (ç”¨äºç§»åŠ¨ç«¯å¼€å‘)

### å®‰è£…ä¾èµ–
```bash
flutter pub get
```

### è¿è¡Œé¡¹ç›®

#### Webå¹³å°ï¼ˆæ¨èç”¨äºå¼€å‘æµ‹è¯•ï¼‰
```bash
flutter run -d chrome
```

#### Androidå¹³å°
```bash
flutter run -d <è®¾å¤‡ID>
```

**æ³¨æ„**: Androidæ¨¡æ‹Ÿå™¨å¯èƒ½å­˜åœ¨DNSè§£æé—®é¢˜ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨Chromeè¿›è¡Œå¼€å‘æµ‹è¯•ã€‚

## é…ç½®è¯´æ˜

### Android é…ç½®
- å·²é…ç½®ç½‘ç»œæƒé™ (`INTERNET`)
- å·²å¯ç”¨ HTTP æ˜æ–‡æµé‡æ”¯æŒ (`usesCleartextTraffic`)
- å·²é…ç½®ç½‘ç»œå®‰å…¨ç­–ç•¥ (`network_security_config.xml`)ï¼Œæ”¯æŒHTTPæ˜æ–‡æµé‡

### API é…ç½®
API åŸºç¡€URLé…ç½®åœ¨ `lib/services/video_api_service.dart` ä¸­ï¼š
```dart
static const String baseUrl = 'http://anime.ayypd.cn:3000';
```

## å¼€å‘è¿›åº¦

è¯¦ç»†å¼€å‘è¿›åº¦è¯·æŸ¥çœ‹ [docs/å¼€å‘è¿›åº¦.md](docs/å¼€å‘è¿›åº¦.md)

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

[å¾…å®š]
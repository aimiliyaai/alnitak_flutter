# 个人中心页面重新设计

## 设计概述

个人中心页面已从复杂的 YouTube 风格多 Tab 布局重新设计为简洁的列表式单页布局，提供更好的移动端用户体验。

## 设计参考

设计灵感来源于提供的设计稿，采用了现代移动应用常见的卡片式布局风格。

## UI 结构

### 1. AppBar（顶部导航栏）
- **标题**："我的" - 居中显示
- **操作按钮**：设置图标（右上角）
- **样式**：白色背景，无阴影

### 2. 用户信息卡片
位于页面顶部的独立白色卡片，包含：

**头像**
- 圆形头像，半径 50px
- 默认背景色：`#E8D5C4`（米色）
- 默认图标颜色：`#8B7355`（棕色）
- 支持使用 `CachedCircleAvatar` 加载网络头像

**用户信息**
- 用户名：20px，粗体（font-weight: 600）
- UID：13px，灰色（600）
- 粉丝数和视频数：14px，水平居中，中间分隔线

**间距**
- 卡片外边距：上下左右 16px（底部 12px）
- 卡片内边距：20px
- 元素间距：合理的垂直间距

### 3. 功能菜单列表
独立的白色卡片，包含 4 个功能入口：

| 图标 | 功能名称 | 图标类型 |
|------|---------|---------|
| 🔔 | 消息 | `Icons.notifications_outlined` |
| 🕐 | 观看历史 | `Icons.history_outlined` |
| 🔖 | 收藏夹 | `Icons.bookmark_border` |
| ⬇️ | 离线缓存 | `Icons.download_outlined` |

**样式特点**：
- 每个菜单项高度：16px 上下内边距 + 内容
- 图标大小：24px
- 图标颜色：`Colors.grey[700]`
- 右侧箭头：20px，`Colors.grey[400]`
- 菜单项之间有细分割线（从图标右侧开始，左侧留白 56px）
- 圆角：12px

### 4. 特色区域
单独的区块，包含：

**区域标题**
- 文本："特色区域"
- 字体大小：15px，粗体（font-weight: 600）
- 颜色：`Colors.grey[800]`
- 上边距：20px，左右边距：16px

**创作中心卡片**
- 独立的白色卡片
- 图标：`Icons.video_library_outlined`
- 与功能菜单项样式一致

## 配色方案

| 元素 | 颜色值 | 说明 |
|------|--------|------|
| 页面背景 | `#F5F5F5` | 浅灰色 |
| 卡片背景 | `#FFFFFF` | 白色 |
| 主要文本 | `Colors.black87` | 深灰黑 |
| 次要文本 | `Colors.grey[600]` | 中灰色 |
| 默认头像背景 | `#E8D5C4` | 米色 |
| 默认头像图标 | `#8B7355` | 棕色 |
| 图标颜色 | `Colors.grey[700]` | 深灰色 |
| 箭头颜色 | `Colors.grey[400]` | 浅灰色 |
| 分割线 | `Colors.grey[100]` | 极浅灰 |

## 布局细节

### 间距规范
- **卡片外边距**：左右 16px
- **卡片圆角**：12px
- **卡片内边距**：20px（用户信息卡片），16px（菜单项）
- **元素间垂直间距**：
  - 头像到用户名：16px
  - 用户名到 UID：6px
  - UID 到粉丝/视频数：12px
  - 卡片之间：6px - 12px

### 交互效果
- **菜单项点击**：InkWell 水波纹效果
- **圆角**：所有卡片和按钮使用 12px 圆角
- **视觉反馈**：触摸时显示水波纹动画

## 代码优化

### 1. 性能优化
- 使用 `CustomScrollView` + `SliverAppBar` 实现高性能滚动
- `SliverToBoxAdapter` 包装非列表内容
- 避免不必要的重建

### 2. 组件化
独立的可复用方法：
- `_buildAppBar()` - 顶部导航栏
- `_buildUserInfoCard()` - 用户信息卡片
- `_buildMenuList()` - 功能菜单列表
- `_buildSpecialSection()` - 特色区域
- `_buildMenuItem()` - 单个菜单项
- `_buildDivider()` - 分割线

### 3. 图片缓存
使用 `CachedCircleAvatar` 加载用户头像，支持：
- 网络图片缓存
- 默认占位符
- 错误处理

## 数据模型（待对接 API）

```dart
class UserProfile {
  final String userName;      // 用户名
  final String userId;         // UID
  final String? avatarUrl;     // 头像 URL
  final int fansCount;         // 粉丝数
  final int videoCount;        // 视频数

  // TODO: 添加更多用户信息字段
  // - 签名/个人简介
  // - 会员等级
  // - 性别
  // - 生日
  // 等等
}
```

## 待实现功能

### 菜单功能页面
- [ ] 消息页面
- [ ] 观看历史页面
- [ ] 收藏夹页面
- [ ] 离线缓存页面
- [ ] 创作中心页面
- [ ] 设置页面

### 用户信息编辑
- [ ] 点击头像可以更换头像
- [ ] 编辑用户名
- [ ] 编辑个人简介

### API 对接
- [ ] 获取用户信息接口
- [ ] 更新用户信息接口
- [ ] 上传头像接口

## 与旧版本对比

### 旧版设计（YouTube 风格）
- ❌ 复杂的多 Tab 布局（视频、播放列表、社区、频道、关于）
- ❌ 大量占位内容（播放列表、社区等）
- ❌ 适合桌面端，移动端体验一般
- ❌ 功能过于分散

### 新版设计（列表式）
- ✅ 简洁的单页布局
- ✅ 核心功能突出（消息、历史、收藏、缓存）
- ✅ 专为移动端优化
- ✅ 清晰的信息层级
- ✅ 更好的触摸交互体验

## 文件修改记录

- **修改文件**：`lib/pages/profile_page.dart`
- **修改前行数**：700+ 行
- **修改后行数**：299 行
- **代码减少**：60% 以上
- **复杂度降低**：移除 TabController，简化状态管理

## 视觉效果预览

```
┌─────────────────────────────┐
│          我的          ⚙️   │  ← AppBar
├─────────────────────────────┤
│                             │
│         ┌─────┐             │
│         │     │             │  ← 用户头像
│         │  😊 │             │
│         └─────┘             │
│                             │
│          Ethan              │  ← 用户名
│      UID:123456789          │  ← UID
│    500粉丝 │ 100个视频      │  ← 统计信息
│                             │
└─────────────────────────────┘

┌─────────────────────────────┐
│ 🔔  消息               >    │
├─────────────────────────────┤
│ 🕐  观看历史           >    │
├─────────────────────────────┤
│ 🔖  收藏夹             >    │
├─────────────────────────────┤
│ ⬇️  离线缓存           >    │
└─────────────────────────────┘

    特色区域

┌─────────────────────────────┐
│ 📹  创作中心           >    │
└─────────────────────────────┘
```

## 技术亮点

1. **响应式设计**：使用 `CustomScrollView` 实现流畅滚动
2. **组件复用**：`_buildMenuItem` 方法可复用于所有菜单项
3. **图片缓存**：集成 `cached_network_image` 库
4. **Material Design**：遵循 Material Design 3 设计规范
5. **性能优化**：避免不必要的重建，使用 const 构造函数

## 未来扩展

### 可能的功能增强
- 添加下拉刷新
- 添加用户等级标识
- 添加会员徽章
- 添加每日签到入口
- 添加我的钱包入口
- 添加积分/经验值显示
- 添加主题切换功能

### UI 细节优化
- 添加骨架屏加载动画
- 添加页面切换动画
- 添加微交互动画（如点赞动画）
- 支持暗黑模式

---

**重新设计日期**：2025-01-09
**设计版本**：v2.0
**适用平台**：Android、iOS
